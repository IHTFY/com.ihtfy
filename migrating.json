{"slug":"migrating","title":"migrating","date":"2022-02-20","excerpt":"TODO","tags":["todo"],"html":"<p>I’m going to try migrating this site from WordPress to a SvelteKit site hosted on GitHub. I’m paying $99 per year to host on wordpress.com; there’s a cheaper plan now, but I don’t see any way to downgrade - only upgrade. It’s also very limiting: I can’t add an SVG image, custom JS (expected), but even the additional CSS rules are very limited because the theme overrides them.</p>\n<p>My hope is to export this site data. Find a way to “load” it into a SvelteKit site, then I’ll go through all the posts by hand and make sure everything is working correctly. I used to host a Jekyll blog site on gh pages, but it kept breaking because GitHub would update dependencies automatically.</p>\n<p>One nice thing about WordPress is I can easily write from my phone and schedule posts. I’m actually starting this post on February 17th, but I’ll post it on the 19th.</p>\n<p>There are some limitations on GitHub pages. They need to be static which is fine with me, but I’ll likely need to do some tweaking and use a different theme. The storage and bandwidth limitations on GitHub aren’t a concern to me since I don’t get much traffic to my site, and I plan on hosting most videos on YouTube.</p>\n<h2 id=\"exporting\">Exporting<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#exporting\"><span class=\"heading-link\">#</span></a></h2>\n<p>I went to <code>https://wordpress.com/export/frankiemercado.com</code> to export all my website content. This gave me a big XML file with all my posts. The images are nested inside of month and year folders, so one file may be at <code>./2022/01/image.jpg</code>.</p>\n<p>The formatting of the XML is pretty cluttered; lots of “wp” comments and “wp:…” tags which is to be expected. I think I’d like my site to have each post structured as markdown. When I searched for “wordpress to markdown” I find <a href=\"https://github.com/lonekorean/wordpress-export-to-markdown\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this script</a>.</p>\n<p>From Windows PowerShell, I go to the folder containing all my data.</p>\n<p><code>cd .\\\\Downloads\\\\wp20220218</code></p>\n<p>Then I run the command:</p>\n<div class=\"code-block svelte-qgch0c\">\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\">npx wordpress-export-to-markdown</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>I renamed the XML file to <code>export.xml</code>, and kept the default output folder name. These are the settings I used:</p>\n<div class=\"code-block svelte-qgch0c\"><div class=\"filename svelte-qgch0c\">config</div>\n\t<div class=\"lang svelte-qgch0c\">shell</div>\n\t<pre class=\"language-shell\"><!-- HTML_TAG_START --><code class=\"language-shell\">Starting wizard…  \n? Path to WordPress <span class=\"token builtin class-name\">export</span> file? export.xml  \n? Path to output folder? output  \n? Create year folders? No  \n? Create month folders? No  \n? Create a folder <span class=\"token keyword\">for</span> each post? Yes  \n? Prefix post folders/files with date? Yes  \n? Save images attached to posts? Yes  \n? Save images scraped from post body content? Yes  \n? Include custom post types and pages? No</code><!-- HTML_TAG_END --></pre>\n</div>\n<p>Now I have a folder called <code>output</code> filled with folders for each post named like: YYYY-MM-DD-PostTitle. Inside one of these folders is an <code>index.md</code> file which contains the text and formatting of the post. There is also a folder called <code>images</code> which contains any images from that post.</p>\n<h2 id=\"new-theme\">New Theme<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#new-theme\"><span class=\"heading-link\">#</span></a></h2>\n<p>Next, I need to find a new theme to use.</p>\n<ul><li><a href=\"https://fantinel.dev/blog-development-sveltekit/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">This one</a> looks nice, but has some server side code I’d need to work around if I host for free on GitHub</li>\n<li><a href=\"https://github.com/svelteland/svelte-kit-blog-demo\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">This one</a> is simple and static.</li></ul>\n<p>After looking at the first one again, it looks like he’s <a href=\"https://github.com/matfantinel/matfantinel.github.io/deployments/activity_log?environment=github-pages\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">hosted on github-pages</a> too, so I think I’ll start there.</p>\n<h2 id=\"setup\">Setup<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#setup\"><span class=\"heading-link\">#</span></a></h2>\n<p>I downloaded the .zip file from <a href=\"https://github.com/matfantinel/matfantinel.github.io\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">his GitHub</a>, extract it, and open in VS Code. Looking at <code>package.json</code> I see the usual SvelteKit scripts: <code>dev</code>, <code>build</code>, <code>preview</code>. He also has a <code>deploy</code> script for <code>gh-pages</code> to publish the <code>build</code> folder, and some <code>prettier</code> stuff for linting and formatting.</p>\n<p>I’ll run <code>npm install</code> and see what happens. No errors.</p>\n<p>I think I’ll need to change the <code>build</code> script though, since I’m on Windows, and I don’t think it will recognize the <code>rm -rf ...</code> command, though PowerShell does use some Unix commands, so who knows.</p>\n<p>Let’s try <code>npm run dev</code>. Errors: <code>config.kit.target is no longer required, and should be removed</code>.</p>\n<p>In <code>svelte.config.js</code> I’ll remove the <code>target</code> from <code>kit: {...</code>.</p>\n<p>Now when I run, there are no errors in the console, but the page (<code>localhost:3000</code>) has an error: <code>Unrecognized option &#39;enableSourcemap&#39;</code>.</p>\n<p>After searching a bit, I may need to update svelte or some other decency. I’ll run <code>npm update</code>. That seemed to fix it.</p>\n<p>I see the site, but when I scroll down and up, it crashes and gives another error: <code>[plugin:vite-plugin-svelte] Error while preprocessing C:/Users/Frankie/Documents/Code/blog/src/lib/posts/web-workers.md - Cannot read property &#39;buildPlaceholders&#39; of undefined</code>.</p>\n<p>I run <code>npm install</code> again to see if that fixes anything. Nope.</p>\n<p>I’m able to open the <code>resume</code> page fine, but all of the blog posts are broken because of the issue.</p>\n<p>I wonder if I need to run the <code>postbuild</code> script to run <code>svelte-sitemap</code>, just guessing. I’ll need to make the <code>build</code> script Windows PowerShell friendly first.</p>\n<p>I added a file called <code>.nojekyll</code> to the <code>/static</code> directory. Then the <code>build</code> script just becomes <code>svelte-kit build</code>.</p>\n<p>I’m also going to remove the Plausible analytics. I’ll just comment out the scripts in the head of <code>app.html</code>.</p>\n<p>Still not working. I see someone posted <a href=\"https://github.com/matfantinel/matfantinel.github.io/issues/18\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">the same issue</a>. I was able to fix the latter issue that’s linked, but I haven’t been able to fix the mdsvex/prismjs problem.</p>","css":{"code":".code-block.svelte-qgch0c.svelte-qgch0c{display:block;position:relative;background-color:var(--code-background-color);color:var(--code-text-color);font-family:var(--mono-font);font-size:1rem;line-height:1.33em;border-radius:8px;box-shadow:var(--card-shadow);padding:30px 15px;margin:30px 0}.code-block.svelte-qgch0c pre{overflow-x:auto;scrollbar-color:var(--primary-color) var(--scrollbar-track-color);scrollbar-width:thin;padding-bottom:5px}.code-block.svelte-qgch0c pre::-webkit-scrollbar{height:8px}.code-block.svelte-qgch0c pre::-webkit-scrollbar-thumb{background:var(--primary-color)}.code-block.svelte-qgch0c pre::-webkit-scrollbar-thumb:hover{background:var(--primary-light-color)}.code-block.svelte-qgch0c .lang.svelte-qgch0c{position:absolute;right:0;top:-15px;background:inherit;border-radius:8px;padding:5px 10px;z-index:2;font-size:0.85em}.code-block.svelte-qgch0c .filename.svelte-qgch0c{background:inherit;border-top-left-radius:8px;border-top-right-radius:8px;margin-bottom:-2px;padding:5px 10px;position:absolute;left:0px;top:-15px;z-index:1}","map":null},"head":"","readingTime":"5 min read","relatedPosts":[{"slug":"habit","title":"habit","date":"2022-04-02","excerpt":"TODO","tags":["todo"],"html":"<p>I still get reminders from the WordPress app to post everyday. Some days it doesn’t work though.</p>\n<p>I started working on building my website with sveltekit again. It’s at <a href=\"https://site.ihtfy.com\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">site.ihtfy.com</a> for now, but eventually I’ll put it on <a href=\"https://ihtfy.com\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">ihtfy.com</a> and <a href=\"https://frankiemercado.com\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">frankiemercado.com</a> will forward to <a href=\"https://ihtfy.com\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">ihtfy.com</a> I think.</p>","css":{"code":"","map":null},"head":"","readingTime":"1 min read"},{"slug":"again","title":"again","date":"2022-03-31","excerpt":"TODO","tags":["todo"],"html":"<p>I forgot to write again.</p>","css":{"code":"","map":null},"head":"","readingTime":"1 min read"},{"slug":"wombo","title":"wombo","date":"2022-03-31","excerpt":"TODO","tags":["todo"],"html":"<p>I’ve been using <a href=\"https://app.wombo.art/\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">this site</a> to make the thumbnail images for these posts - using the title as the prompt.</p>\n<p>The last two days, I forgot to write until just after midnight. I adjusted the post date to be 11:59pm just to keep the dates consistent, but I failed to adhere to the original goal. I think I will move to the weekly posts, and just update the draft throughout the week. This should mean there are no more totally junk posts like the last two days.</p>\n<p>Once I migrate to my new site - by June 21, 2022 - I may consolidate these last 3 months of daily posts.</p>","css":{"code":"","map":null},"head":"","readingTime":"1 min read"}]}